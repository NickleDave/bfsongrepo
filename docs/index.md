# Bengalese Finch Song Repository

* On Figshare: [![DOI](https://img.shields.io/badge/doi-10.6084/m9.figshare.4805749.v8-blue.svg?style=flat&labelColor=gainsboro&logoWidth=40&logo=data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAFAAAAAZCAYAAACmRqkJAAAKi0lEQVR4Ae3ZaVBUV97H8evuE0EfH32MmkcfoyAuGjXKgkvMaFRAFuiloemWvRuEXlgEBREXBYJiXAQUFeKocUniQiKogAJhQWwWENDEjLNYvjFLzUzNkplEZb5kTme6nCRjKlOpSZlb9SmL2%2Ffcuv3re87%2FnKP0TYfOcslqPMbt63xBKuh09MTxgi7HKT1Sj1TvKp%2BMkZB6%2FXT8c4AjUYPyVdfb7Qs6HTIJ8EHe7Ul%2B152CphDabRQ0uMr7%2FRQgh%2B8qU6%2FBiPDVGv0jq0uGE94b0ZZ3j%2B25MTetoMsh%2FWD91OBqT9%2Fsehd5EqGV17nKMzTqOHvaRMMLEp7qACfinq%2FW1BBx5ZxB13x5X3Jr1v%2Fz9pUcaHU63PiicjrhvXfNRbY1Th49Q6Y1vu6zyqSjzX3aVIgf4OkKToxhgxpd5OMzV0bYE4CRN1Chu34pnTfwnV03FiTlfzDRXBHo6dfgIq8sX6ByV6vjthGc0UdrrPPVGFQBxlSjzJQWENVUZkebceiLpyM8IZSx7O7Zl4JivUNMZX5h8Rt4%2B2L0llKfgu6JKa%2BXvpB5bZ48%2Ba3F6lil2pDkE2rODzCsU0VUnNFHNZQqdS3lx3Utl%2FMILQcfYt5TEeC1GSprgAq0XlgYGLQyxJTlr0uK0DVX7E5s2ZtOgHvLw5fLK9xVmcqguEj%2F2LXbwsvPBkZZKl4j5NcIKinaUsLbejFWZ7m8Do2cmwnb4cFqArRwx3TEYzi%2Bz7DTD0uhxnj8cAEWWUZK%2BTcdhh4pmTWUsW01Y1uCUmNY7Rtqzo5svJSS0poVXtg6yVj7sn9qunek3j8xPVXXeMFoaDkev6lDF7ene7Y5r2taNAXmEBXaP69zevaOjuUeeZ0zhzJuPsM5CdYvOhZVqBMhBqIVDt8zwGdQjR4of9AA%2BXJjUFpww7GodnHAQca4srDAWCXjW3pETal%2BbfumuOLKqSm17vIQtWr1Uu3JYy6JbXuXFbRN1R8pm5byxtG5CcdOz9EUVc7I5IeQEWQ7wWVwzwrsRn%2BbAFeiCxNsKv5Y9P03BFgjAlT90AGOQy2T47fObl00ocFZHl%2B2UGXw0RjzNUWHTPFthckHWh18al8KsGuaFigVVzlKuY%2BG9z37qvuoGlelpsJVldrgrFjbOE%2BeWe8uW18W84qCqc4s7tmCIgzI75hs%2FaJKNFu7rF%2BIIIhr%2BmIQ%2Btn8LQkDMQOeWAYnDHgsQI3NNU7W9j4h5t72o%2FEyvLEQ%2F%2Bu7ymzbOxbCAeOxAgtghz6YgOVYiufEOUlqu0M37ho%2BYn%2FnpJT8bsejVSt90uqdFdlGmV7hF7cuWXetNCShLX%2BI3nKhN%2ByvCs%2Bs6GQpWB33fzKNQR%2BqWr022yvc94q7spBCY%2Bbzkou6ZfJNPf89ZN%2FdidYHnIsKfIzjCMIc7MAwSJiMPFxGMcKQixGwx07R%2FiEe4CNsxFCbAJvwifj8LkIgYRHa8Lm47jNY8AokmMS5NryPh%2FijOB%2BOX4h7foEuyPHlisMtylJpzu1YspkQ36YbLqnx8F1X4abaqmYs9DGmLlrk4CE9XlHlKZskxfpt%2FUJLzyhV23dG%2BITF72fqo9njEaokwIu8lSbG1N4wx273CrP%2B%2BjniQVZhGrzQjlEioFIRcjDM6MIdjBVtHogvl4W9qIX8sTfwU5SgU%2FzdhdGYLcJ9BzvRID6vgx2SxN8PUI9KnIEWH4n7FuIo%2FoRfYV5vMMV4wHRFs%2BvG%2FKl05ZrDVdP11T7eulK3oNQcz%2FAXcj3DpMePjO44KetDL2lDh%2FmV1S3nNoeWnJb7RSXmMJl%2BI0GmH13rKs8lvEdQwfoWKmCxdmGbAEdgAW5jFiQhBb8WXSYTPSjGCBHaMPR5LMANkOCM%2B%2FgD3MS5Z8W1ElzwW3HNJCSI9tcw2ub%2BO8T5LPTBQBy1nusNcB7ztximI1sIsSSzXb04v3vyusJmx63nMufHXlV6LvpEShDd9x%2FHFYWXVPuSX7%2FD7zmpcjuWRupbyvaHnj8Z7BNsUFCArm70iTRcd5bFEN7oxwJs%2FpoA%2FwfBaLJ2Z2EFbmEsNKL7fYYPUI9DIqj%2Fsgkw0CasW%2BL6RbBDFI7gTZSKzz6Gk02AJ23G3QF4xybYU8INce6s5CJNlTyXhYwKv%2FRWMiEeimquzIhrPpGzuSNCsbvLec2%2Brpmh2e0yu%2FxOp96wv6p8X0xeIZW5Bo2%2F6ucdvb%2FdMWVDm8lX11pRpD16OJ6VyZsrQ8yK%2BVFJ9h4UhwEHDj5JgGE23UkSfoZujMMzSESNCPBT9KAFjqi2rcIYZRPgYmzDQ9xDLSz4%2FGsCPIE%2BNkWrTJy%2FhRrRthpVyJJExbnmG2I%2B6x%2BT%2FHxYyQkzQfJGlufpWy6bYlvPUEgu%2BHlHJA5boo7rE3blnBR7r6mv%2BvCBMYEag%2Faqsyr1%2BIk5a%2Fd2z9zGBDpZ31qulCWk9443Hfg5BuJJAgxAG0ZBEmS4DZ7RKIliMVi0d8UvRUCeuPoNAf4Z%2FmgV13pAwiwR3iffFKBQJM5noB%2F6Y5h45v7Wwf0cDtD1DlMIeiugWmZOy5Cv3RgjX7%2FF4GdMXasOjgurmqdafqpojltml9IjvOJ8NMu9lNL5gQmXdMu0BTefz8loMyoJvivs3VMZvhpjqaig%2FZ8gwJGYIsIKRh%2FY4wh%2Bg%2FGQoxYbREgZ%2BB3uww1V3xKgN%2BrwCNtF4Pvx8NveQCEYX%2BAukhCIYuHZLy%2FyDjHbJQfo7PTK1dEBWqPBX2vS%2B2hNW1XquDURypiwXStCjVWuyrSKQC%2FdoUaHtOT2HENoyal4b40x7rK7ylip9NIV3Jy0P6fD24fl3Ra6uoe3PNqOH2Pw3x%2FC8K8CHIU%2BIpQ7OI8yNOJ9TMJO%2FAU9Nn6PjRiGmm%2FpwgsRLQpKjwjuU%2Fz1CQK0R4G4T4%2FwCHWYKlmcA6xr4SA2EzobXeUa9vh21LgpdKxK8hqd5RsaXWS7S9YvlhU2O7ya3ekXrm%2B9lK3KzFH6a4y5V92Ve5hkM4d02EShMestZekE2IxZX7MWdkAgBtmsi9U2lXEwliAOK%2BGLTowThWIZkrEVSSKYgegPOUxwtFmdaBGLsRgg2qeKtosQDh2GYzbisUIEaPvcQ8T5VGzCKowBk2I3mTVALe4wd4tumKcoaZirSKte4RtVrvXwLrw%2BJXV%2F18Ts3BtLEmOaS0yRtRdMfpGJhTKNMbDJWR5V7eEbUNDtcIQAd1PJMwnuJl6E9KQHY7AAHkzQoBkj8B%2B%2FpTWQ4Maezne1P3x1esLBuqmB%2BbccNhJMGetbM%2BGZIi1V%2FoRyOXB77sKVWuPmrd4RBvYQm9ihVue%2F7xDPGljB50MoJmO%2By36gCGsQovCyCGwOarD9R7PLLXZOJjKZvse%2FDQQSvffG7F1rWrZPiLKUX2DPr1hbfHAKb0kDBSeTed5MQj94Pn1xBMvA%2B2IDYTAkcXzXANPRjHq04ACeFeH9aAIcBC3LOq%2FY5pPDeYtO4yRTmzUhbx9LozCEea8ybaHoxDNmVtPltxSVzxhCm3Asg4Tvs683Aa5wwkD8qP9XbgQqUbb6Tp09U5Os3rWiV4jZv2OuvxPdvht70RfST8fjATZd7P33OYzxZ%2FdF7FwcgqPU0yMR2vMYDulpDfBvw%2BGCdBePpq8AAAAASUVORK5CYII%3D)](https://doi.org/10.6084/m9.figshare.4805749.v7)
* Dataset license: [![License: CC BY 4.0](https://img.shields.io/badge/License-CC_BY_4.0-lightgrey.svg)](https://creativecommons.org/licenses/by/4.0/)
* License for code for this site / associated scripts: [![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

## About this dataset

This is a collection of song from four Bengalese finches
recorded in the [Sober lab at Emory University](https://scholarblogs.emory.edu/soberlab/).
The song has been annotated manually by two of the authors.

We share this collection as a means of testing
different machine learning algorithms
for classifying the elements of birdsong, known as syllables.

The dataset is housed on Figshare here:
https://figshare.com/articles/dataset/Bengalese_Finch_song_repository/4805749.
This site is provided as documentation.

<div id="carouselExampleSlidesOnly" class="carousel slide" data-ride="carousel">
  <div class="carousel-inner">
    <div class="carousel-item active"  data-interval="4000" >
      <img class="d-block w-100" src="_images/bl26lb16_key.png"
       alt="Spectrogram showing snippet of Bengalese finch song with annotated syllables, for bird with ID bl26lb16">
    </div>
    <div class="carousel-item"  data-interval="4000">
      <img class="d-block w-100" src="_images/gr41rd51_key.png"
       alt="Spectrogram showing snippet of Bengalese finch song with annotated syllables, for bird with ID gr41rd51">
    </div>
    <div class="carousel-item" data-interval="4000">
      <img class="d-block w-100" src="_images/gy6or6_key.png"
       alt="Spectrogram showing snippet of Bengalese finch song with annotated syllables, for bird with ID gy6or6">
    </div>
    <div class="carousel-item" data-interval="4000">
      <img class="d-block w-100" src="_images/or60yw70_key.png"
       alt="Spectrogram showing snippet of Bengalese finch song with annotated syllables, for bird with ID or60yw70">
    </div>
  </div>
</div>

### Data collection

This dataset consists of song from four adult (>100-day-old) male
Bengalese finches (*Lonchura striata var. domestica*).
Any file associated with one of the four birds is prefixed with that bird's ID:
"bl26lb16", "gr41rd51", "gy6or6", "or60yw70".
Song was recorded from birds as baseline recordings
for behavioral experiments (not included in this dataset).
Birds were isolated in sound-attenuating chambers
and maintained on a 14 h:10 h light/dark cycle,
with lights on from 7 A.M. to 9 P.M.
All recordings analyzed here are from undirected song (i.e., no other bird was present).
All procedures were approved by
the Emory University Institutional Animal Care and Use Committee.

Recordings were made with a lavalier microphone,
fed into a preamplifier
that then ran to a National Instruments DAQ board.
An automated data acquisition program in LabView ("evTAF")
detected when audio amplitude stayed abve a threshold
for a target period, which then triggered automatic recordings
until amplitude dropped again for another fixed period.
The files thus recorded were then sorted with a separate program
so that the final dataset consisted only of audio files
that contained bouts of song.

### Annotation

After the audio files were sorted
so that they all contained bouts of song,
the song was annotated.
Annotation was done by two of the authors (David Nicholson and Jonah Queen)
using a custom MATLAB GUI application
("evsonganaly", originally written by Evren Tumer).
Audio was segmented into syllables by setting an amplitude threshold.
Segments were post-processed by setting a minimum syllable duration
and a minimum duration for the *silent gap* (the brief quiet period between syllables).
Silent gaps less than the minimum duration were removed
so that the two neighboring segments merged,
and syllables less than the minimum duration were thrown out.
A Python implementation of the segmenting algorithm
used by evsonganaly can be found
[here](https://github.com/NickleDave/evfuncs/blob/fb4c71b845b3d0274848ab134b4c587578401775/src/evfuncs/evfuncs.py#L333).

After segmenting audio into syllables separate by silent gaps,
labels were applied to syllables using the GUI.
A schema was created for each individual bird's song
(shown as images above and included as .tif files in the dataset).
This schema consisted of syllable labels,
chosen by using the acoustic structure of syllables
as visualized in spectrograms
as well as their sequential context.
The schema was typically settled on after labeling a few songs by hand.
Syllable labels are arbitrary across birds, i.e.,
use of the label 'e' for a syllable in the song of bird gy6or6 and
use of the same label 'e' for another syllable in the song of bird bl26lb16
is **not** meant to indicate that there is any resemblance
between these two syllables.
(In Bengalese finches,
song can vary widely across invididuals.)
The one exception is that the label 'i' is usually used
to annotate the squawky, low-amplitude, high-entropy
syllables often referred to as "introductory notes".
(See for example https://royalsocietypublishing.org/doi/full/10.1098/rspb.2020.2796).

While labeling the entire set of songs for each individual bird,
any syllables that did not clearly fit into the schema
were annotated with other characters
that were not part of the set chosen for the schema,
so these syllables could be identified later.
Some audio files contained contact calls
that birds produced before or after song.
In some cases
(when the bird emitted contact calls frequently)
these were annotated,
again with a character that was not in the set
chosen for the labeling schema.

## Usage

To make it easy to work with the dataset,
we have created a Python package, evfuncs,
available at https://github.com/soberlab/evfuncs.
You can install it with `pip` or `conda`.

:::{eval-rst}

.. tabs::

   .. code-tab:: shell with ``pip``

         pip install evfuncs

   .. code-tab:: shell with ``conda``

         conda install evfuncs -c conda-forge

:::

How to work with the files is described on the README of that library,
but we describe the types of files here briefly.
The actual sound files have the extension .cbin
and were created by an application that runs behavioral experiments
and collects data called EvTAF.
Each .cbin file has an associated annotation file, with the extension .not.mat,
that contains song syllable onsets, offsets, labels, etc.,
created by a GUI for song annotation called evsonganaly.
Each .cbin file also has an associated .rec file,
also created by EvTAF.
These are included only because they contain the sampling rate,
and are used by `evfuncs` to provide this sampling rate
along with raw audio from .cbin files, via the `load_cbin` function.

### New audio and annotation format

We have now added separate .tar.gz archives
that contain the audio files in the .wav format,
and the annotations in a .csv format.

The addition of a widely-used audio format makes it easier to load the audio files,
e.g. with pysoundfile: https://pysoundfile.readthedocs.io/en/latest/.

The annotation files are in the 'simple-seq' format
and can be easily worked with in Python using the `crowsetta` library:

https://crowsetta.readthedocs.io/en/latest/formats/seq/simple-seq.html#simple-seq

or if you prefer, any library that can read .csv files,
such as `pandas`: https://pandas.pydata.org/

### Scripts to build the dataset and source code for this site

Scripts used to organize the dataset,
as well as the source code for this site,
can be found at:
https://github.com/NickleDave/bfsongrepo.
These may provide helpful examples for working with the data
and/or creating a similar project.

## Download

### Through the browser, from Figshare

<iframe src="https://widgets.figshare.com/articles/4805749/embed?show_title=1" width="568" height="351" allowfullscreen frameborder="0"></iframe>

### Through the terminal, using a script

Choose the audio + annotation format you wish to use, then
paste the corresponding command below into a terminal
(hover the mouse cursor over the text for a copy button).

#### .wav audio + .csv annotations

:::{eval-rst}

.. tabs::

   .. code-tab:: shell macOS / Linux

      curl -sSL https://raw.githubusercontent.com/NickleDave/bfsongrepo/main/src/scripts/download_dataset.py | python3 - --audio-annot-type wav-simpleseq

   .. code-tab:: shell Windows

      (Invoke-WebRequest -Uri https://raw.githubusercontent.com/NickleDave/bfsongrepo/main/src/scripts/download_dataset.py -UseBasicParsing).Content | py - --audio-annot-type wav-simpleseq
:::

#### .cbin audio + .not.mat annotations

:::{eval-rst}

.. tabs::

   .. code-tab:: shell macOS / Linux

      curl -sSL https://raw.githubusercontent.com/NickleDave/bfsongrepo/main/src/scripts/download_dataset.py | python3 - --audio-annot-type cbin-notmat

   .. code-tab:: shell Windows

      (Invoke-WebRequest -Uri https://raw.githubusercontent.com/NickleDave/bfsongrepo/main/src/scripts/download_dataset.py -UseBasicParsing).Content | py - --audio-annot-type cbin-notmat

:::

## Citation

The dataset can be cited as follows:

:::{eval-rst}

.. tabs::

   .. code-tab:: shell MLA

      Nicholson, D., et al. Bengalese Finch Song Repository. 7, figshare, 18 Oct. 2017, doi:10.6084/m9.figshare.4805749.v7.

   .. code-tab:: shell APA

      Nicholson, D., Queen, J. E., & J. Sober, S. (2017). Bengalese Finch song repository (Version 7).
      figshare. https://doi.org/10.6084/m9.figshare.4805749.v7

   .. code-tab:: shell BibTeX (generic)

      @article{Nicholson2022, author = "David Nicholson and Jonah E. Queen and Samuel J. Sober", title = "{Bengalese Finch song repository}", year = "2022", month = "9", url = "https://figshare.com/articles/dataset/Bengalese_Finch_song_repository/4805749", doi = "10.6084/m9.figshare.4805749.v7" }

:::

Please be sure to include the DOI of the version you use with your citation.

If you are developing machine learning algorithms,
we ask that you cite other relevant publications and software (see below)
and also consider benchmarking against related algorithms.
Our impression is that it will require a community of researchers
working together to advance the state of the art in this area.

## Cited by

The following works use and/or cite this dataset.
Works are listed in order of publication.
If you are aware of a scholarly work that uses this dataset
that is not cited here,
please feel free to contact the maintainer. See {ref}`contact` below.

+ Nicholson, D. (2016, July).
  Comparison of machine learning methods applied to birdsong element classification.
  In Proceedings of the 15th Python in Science Conference (Vol. 57, p. 61).
  https://conference.scipy.org/proceedings/scipy2016/david_nicholson.html

+ Sainburg, T., Theilman, B., Thielk, M., & Gentner, T. Q. (2019).
  Parallels in the sequential organization of birdsong and human speech. Nature communications, 10(1), 1-11.
  https://www.nature.com/articles/s41467-019-11605-y.

+ Sainburg, T., Thielk, M., & Gentner, T. Q. (2020).
  Finding, visualizing, and quantifying latent structure across diverse animal vocal repertoires.
  PLoS computational biology, 16(10), e1008228.
  https://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1008228.
  Preprint: https://www.biorxiv.org/content/10.1101/870311v1.full.pdf

+ Steinfath, E., Palacios-Muñoz, A., Rottschäfer, J. R., Yuezak, D., & Clemens, J. (2021).
  Fast and accurate annotation of acoustic signals with deep neural networks. Elife, 10, e68837.
  https://elifesciences.org/articles/68837.
  Preprint: https://www.biorxiv.org/content/biorxiv/early/2021/03/29/2021.03.26.436927.full.pdf.

+ Cohen, Y., Nicholson, D. A., Sanchioni, A., Mallaber, E. K., Skidanova, V., & Gardner, T. J. (2022).
  Automated annotation of birdsong with a neural network that segments spectrograms. Elife, 11, e63853.
  https://elifesciences.org/articles/63853.
  Preprint: https://www.biorxiv.org/content/biorxiv/early/2020/10/13/2020.08.28.272088.full.pdf

+ Linhart, P., Mahamoud-Issa, M., Stowell, D., & Blumstein, D. T. (2022).
  The potential for acoustic individual identification in mammals. Mammalian Biology, 1-17.
  https://link.springer.com/article/10.1007/s42991-021-00222-2.
  https://blumsteinlab.eeb.ucla.edu/wp-content/uploads/sites/104/2022/04/Linhart_etal_2022_MammBiol.pdf.

(contact)=
## Contact

Please feel free to contact David Nicholson (nicholdav at gmail dot com)
with questions and feedback.

## Acknowledgements
This work was supported by
National Institutes of Health National Institute of Neurological Disorders and Stroke R01 NS084844,
National Institutes of Health National Institute of Neurological Disorders and Stroke F31NS089406.

::::{grid} 2

:::{grid-item-card}
```{image} images/bl26lb16_key.png
:alt: Spectrogram showing snippet of Bengalese finch song with annotated syllables, for bird with ID bl26lb16
```
:::

:::{grid-item-card}
```{image} images/gr41rd51_key.png
:alt: Spectrogram showing snippet of Bengalese finch song with annotated syllables, for bird with ID gr41rd51
```
:::

::::

::::{grid} 2

:::{grid-item-card}
```{image} images/gy6or6_key.png
:alt: Spectrogram showing snippet of Bengalese finch song with annotated syllables, for bird with ID gy6or6
```
:::

:::{grid-item-card}
```{image} images/or60yw70_key.png
:alt: Spectrogram showing snippet of Bengalese finch song with annotated syllables, for bird with ID or60yw70
```
:::

::::
